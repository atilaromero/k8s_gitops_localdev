---
- hosts: localhost
  connection: local
  gather_facts: no
  vars:
    cluster_name: cicd
  roles:
    - role: k3d_cluster_create
      # overwrites local .kube/config
      kubeconfig: ${HOME}/.kube/config
    - role: localgit_k8s_install
      namespace: localgit
    - role: argocd_k8s_install
      namespace: argocd
    - role: argocd_k8s_apps
      namespace: argocd
